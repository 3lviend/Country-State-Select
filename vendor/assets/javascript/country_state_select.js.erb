$(document).on('ready page:load', function () {
  var default_state ;
  
  $("#country_id").change(function() {
    // var name = $("#state_name").attr("name");
    // var select = $('<select name='+ name +' id="state_name"></select>');
  
    var country = $('#country_id option:selected').text()
    var options = '';
    //default_state = indian_state
    $('#state_name').html('');

    find_csc('/find_states', $("#country_id").val());
    
   });
    
   var find_csc = function(url, id){
     $.ajax({
            url: url,
            type: 'post',
            dataType: 'json',
            cache: false,
            data: {
                country_id: id },
            success:function(data) {
              call_me(data) ;
             }
        });
    }

   var call_me = function(data){
     $("#state_name").html('')
     name = $("#state_name").attr('name');
      	 $html= '<select class="chzn-select" id="state_name1" nanme='+name +' >'		

		    		$html+='<option selected=\"selected\" >'+data[0][1]+'</option>';
  
       for ( var idcount = 1; idcount < data.length; idcount++) {
		            $html+='<option>'+data[idcount][1]+'</option>';
		    		
	    }
		$html+='</select>';		   
$('#state_name').html($html);
$(".chzn-select").chosen();

var state_name= $("#state_name");
state_name.appendChild("chzn-select");



    //    if (data.length > 0) {
    //     for(var val in data) {
    //       $('<option />', {value: data[val], text: data[val]}).appendTo(select);
    //     }
    //   } else {
    //     select = "<input id='state_name' name="+ name +" type='text' value='' />"
    //   }
    // $('#state_name').replaceWith(select); // it will replace what ever inside the id
 
}
});