$(document).on('ready page:load', function () {
  var default_state ;
  
  $("#country_id").change(function() {
    // var name = $("#state_name").attr("name");
    // var select = $('<select name='+ name +' id="state_name"></select>');
  
    var country = $('#country_id option:selected').text()
    var options = '';
    //default_state = indian_state
    find_csc('/find_states', $("#country_id").val());
    
   });
    
   var find_csc = function(url, id){
     $.ajax({
            url: url,
            type: 'post',
            dataType: 'json',
            cache: false,
            data: {
                country_id: id },
            success:function(data) {
              call_me(data) ;
             }
        });
    }

   var call_me = function(data){
	console.log(data);
      var name = $("#state_name").attr("name");
      var select = $('<select name='+ name +' id="state_name"></select>');
  
  
       if (data.length > 0) {
        for(var val in data) {
          $('<option />', {value: data[val], text: data[val]}).appendTo(select);
        }
      } else {
        select = "<input id='state_name' name="+ name +" type='text' value='' />"
      }
    $('#state_name').replaceWith(select); // it will replace what ever inside the id
 
}
});